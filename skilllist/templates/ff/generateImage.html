{% load staticfiles %}
<html>
    <head>
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="{% static 'css/skills.css' %}">
    </head>
    <body>
        <p id='akcia' style="display: none">{{ akcia }}</p>
        <p id='team1' style="display: none">{{ team1 }}</p>
        <p id='score1' style="display: none">{{ score1 }}</p>
        <p id='hit1' style="display: none">{{ hit1 }}</p>
        <p id='error1' style="display: none">{{ error1 }}</p>
        <p id='team2' style="display: none">{{ team2 }}</p>
        <p id='score2' style="display: none">{{ score2 }}</p>
        <p id='hit2' style="display: none">{{ hit2 }}</p>
        <p id='error2' style="display: none">{{ error2 }}</p>

        <form action="" method="post">{% csrf_token %}
            Nazov Akcie:<br>
            <input type="text" name="akcia"><br>
            Team 1 Meno:<br>
            <input type="text" name="team1"><br>
            Team 1 Skore:<br>
            <input type="text" name="score1"><br>
            Team 1 Hity:<br>
            <input type="text" name="hit1"><br>
            Team 1 Errory:<br>
            <input type="text" name="error1"><br>
            Team 2 Meno:<br>
            <input type="text" name="team2"><br>
            Team 2 Skore:<br>
            <input type="text" name="score2"><br>
            Team 2 Hity:<br>
            <input type="text" name="hit2"><br>
            Team 2 Errory:<br>
            <input type="text" name="error2"><br>
            <input type="submit" value="Submit" >
        </form>
        <canvas id="canvas" width="976" height="279"></canvas>
        <a id="download" style="font-size: 30px">Download as image</a>

        <script>
            function draw() {
            var ctx = document.getElementById('canvas').getContext('2d');
            var imageObj = new Image();

            imageObj.onload = function() {
                ctx.drawImage(imageObj, 0, 0);
                ctx.font = '48px serif';
                ctx.fillStyle = 'white'
                ctx.strokeStyle = 'black'
                ctx.fillText(document.getElementById("akcia").innerHTML, 40, 50);
                ctx.strokeText(document.getElementById("akcia").innerHTML, 40, 50);
                ctx.fillText('R', 600, 50);
                ctx.strokeText('R', 600, 50);
                ctx.fillText('H', 700, 50);
                ctx.strokeText('H', 700, 50);
                ctx.fillText('E', 800, 50);
                ctx.strokeText('E', 800, 50);
                ctx.fillText(document.getElementById("team1").innerHTML, 40, 160);
                ctx.strokeText(document.getElementById("team1").innerHTML, 40, 160);
                ctx.fillText(document.getElementById("score1").innerHTML, 600, 160);
                ctx.strokeText(document.getElementById("score1").innerHTML, 600, 160);
                ctx.fillText(document.getElementById("hit1").innerHTML, 700, 160);
                ctx.strokeText(document.getElementById("hit1").innerHTML, 700, 160);
                ctx.fillText(document.getElementById("error1").innerHTML, 800, 160);
                ctx.strokeText(document.getElementById("error1").innerHTML, 800, 160);
                ctx.fillText(document.getElementById("team2").innerHTML, 40, 220);
                ctx.strokeText(document.getElementById("team2").innerHTML, 40, 220);
                ctx.fillText(document.getElementById("score2").innerHTML, 600, 220);
                ctx.strokeText(document.getElementById("score2").innerHTML, 600, 220);
                ctx.fillText(document.getElementById("hit2").innerHTML, 700, 220);
                ctx.strokeText(document.getElementById("hit2").innerHTML, 700, 220);
                ctx.fillText(document.getElementById("error2").innerHTML, 800, 220);
                ctx.strokeText(document.getElementById("error2").innerHTML, 800, 220);
            };
            imageObj.src = '/static/image.png';
            }draw();

            function downloadCanvas(link, canvasId, filename) {
                link.href = document.getElementById(canvasId).toDataURL();
                link.download = filename;
            }

            /**
            * The event handler for the link's onclick event. We give THIS as a
            * parameter (=the link element), ID of the canvas and a filename.
            */
            document.getElementById('download').addEventListener('click', function() {
                downloadCanvas(this, 'canvas', 'image.png');
            }, false);
        </script>
    </body>
</html>